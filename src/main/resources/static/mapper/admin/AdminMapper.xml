<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.laonworks502.team1st.dao.admin.AdminDao">
   
   <!-- 관리자 로그인 아이디 가져오기 -->
    <select id="getAdminInfo" parameterType="String" resultType="com.laonworks502.team1st.model.admin.AdminBean">
        select * from admin where id=#{id}   
    </select>
    
    <!-- 일반회원 일별 가입자 수  -->
    <select id="joinTotalDays" parameterType="int" resultType="int" >
    select count(register_date) from general_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} day) 
    </select>
    
    <!-- 일반회원 주별 가입자 수 -->
    <select id="joinTotalWeeks" parameterType="int" resultType="int">
    select count(register_date) from general_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} week) 
    </select>
    
    <!-- 일반회원 월별 가입자 수 -->
    <select id="joinTotalMonths" parameterType="int" resultType="int">
    select count(register_date) from general_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} month) 
    </select>
    
    <!-- 기업회원 일별 가입자 수  -->
    <select id="companyJoinChartDate" parameterType="int" resultType="int" >
    select count(register_date) from company_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} day) 
    </select>
    
    <!-- 기업회원 주별 가입자 수 -->
    <select id="companyJoinChartWeek" parameterType="int" resultType="int">
    select count(register_date) from company_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} week) 
    </select>
    
    <!-- 기업회원 월별 가입자 수 -->
    <select id="companyJoinChartMonth" parameterType="int" resultType="int">
    select count(register_date) from company_users where date_format(register_date, '%Y-%m-%d') = date_sub(DATE_FORMAT(NOW(),'%Y-%m-%d'), interval #{i} month) 
    </select>

    <!-- 전체 회원 수(일반회원) -->
    <select id="countAllUsers" resultType="int">
    select count(*) from general_users 
    </select>
    
    <!-- 일반 회원 리스트 -->
    <select id="generalUsersList" resultType="com.laonworks502.team1st.model.users.GeneralUserBean">
    select * from general_users limit 0, 10;
    </select>
        
</mapper>